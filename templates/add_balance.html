{% extends "base.html" %}

{% block title %}–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ - ProjectX2{% endblock %}

{% block content %}
<div class="admin-container">
    <div class="admin-header">
        <h2>üí∞ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞</h2>
        <div class="balance-info">
            <span class="balance-amount">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: {{ current_user.balance }} —Ä—É–±.</span>
        </div>
    </div>

    <!-- –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ–º–æ–∫–æ–¥–µ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω) -->
    {% if not promo_used %}
    <div class="promo-notification" id="promoNotification">
        <div class="promo-notification-content">
            <span class="promo-notification-close" onclick="closePromoNotification()">√ó</span>
            <h4>üéÅ –¢–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–º–æ–∫–æ–¥</h4>
            <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ <strong>progectx2</strong> –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è 1000 —Ä—É–±–ª–µ–π –Ω–∞ –±–∞–ª–∞–Ω—Å!</p>
        </div>
    </div>
    {% endif %}

    <div class="payment-methods">
        <!-- –°–ø–æ—Å–æ–± 1: –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ -->
        <div class="payment-card">
            <div class="payment-icon">üí≥</div>
            <h3>–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</h3>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—á–µ—Ç–∞</p>
            <button class="btn btn-primary btn-full" onclick="showDevelopmentMessage()">
                –ü–æ–ø–æ–ª–Ω–∏—Ç—å
            </button>
        </div>

        <!-- –°–ø–æ—Å–æ–± 2: –ü—Ä–æ–º–æ–∫–æ–¥ -->
        <div class="payment-card">
            <div class="payment-icon">üé´</div>
            <h3>–í–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–æ–∫–æ–¥</h3>
            <p>–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–æ–≤</p>
            
            <form method="POST" action="{{ url_for('apply_promo') }}" class="auth-form">
                <div class="form-group">
                    <input type="text" name="promo_code" class="form-input" 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥" required>
                </div>
                <button type="submit" class="btn btn-success btn-full">
                    –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
                </button>
            </form>
            
            <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–º –ø—Ä–æ–º–æ–∫–æ–¥–µ -->
            {% if promo_used %}
            <div class="promo-used-message">
                <p>‚úÖ –í—ã —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø—Ä–æ–º–æ–∫–æ–¥ progectx2</p>
            </div>
            {% endif %}
        </div>
    </div>

    <div class="admin-actions" style="margin-top: 30px;">
        <a href="{{ url_for('index') }}" class="btn btn-secondary">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</div>

<style>
/* –°—Ç–∏–ª–∏ –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–º–æ–∫–æ–¥–µ */
.promo-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    animation: slideInRight 0.5s ease-out;
    max-width: 350px;
}

.promo-notification-content {
    position: relative;
}

.promo-notification-close {
    position: absolute;
    top: -10px;
    right: -10px;
    background: rgba(255, 255, 255, 0.2);
    width: 25px;
    height: 25px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-weight: bold;
    font-size: 18px;
    transition: background-color 0.3s;
}

.promo-notification-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.promo-notification h4 {
    margin: 0 0 10px 0;
    font-size: 1.2rem;
}

.promo-notification p {
    margin: 0;
    line-height: 1.5;
}

.promo-notification strong {
    background: rgba(255, 255, 255, 0.2);
    padding: 2px 6px;
    border-radius: 4px;
}

.promo-used-message {
    background: #d4edda;
    color: #155724;
    padding: 10px;
    border-radius: 5px;
    margin-top: 15px;
    text-align: center;
    border: 1px solid #c3e6cb;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –æ–ø–ª–∞—Ç—ã */
.payment-methods {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 25px;
    margin-top: 30px;
}

.payment-card {
    background: #f8f9fa;
    padding: 30px;
    border-radius: 12px;
    border: 2px solid #e9ecef;
    text-align: center;
    transition: transform 0.3s, box-shadow 0.3s;
}

.payment-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0,0,0,0.1);
}

.payment-icon {
    font-size: 3.5rem;
    margin-bottom: 20px;
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

.promo-notification.hiding {
    animation: slideOutRight 0.5s ease-in forwards;
}
</style>

<script>
function showDevelopmentMessage() {
    alert('–§—É–Ω–∫—Ü–∏—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ "progectx2" –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.');
}

function closePromoNotification() {
    const notification = document.getElementById('promoNotification');
    if (notification) {
        notification.classList.add('hiding');
        setTimeout(() => {
            notification.style.display = 'none';
        }, 500);
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±—ã–ª–æ –∑–∞–∫—Ä—ã—Ç–æ
        localStorage.setItem('promoNotificationClosed', 'true');
    }
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª–æ –ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É–∂–µ –∑–∞–∫—Ä—ã—Ç–æ
document.addEventListener('DOMContentLoaded', function() {
    const notification = document.getElementById('promoNotification');
    if (notification && localStorage.getItem('promoNotificationClosed') === 'true') {
        notification.style.display = 'none';
    } else if (notification) {
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
        setTimeout(() => {
            closePromoNotification();
        }, 10000);
    }
});

// –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
document.addEventListener('click', function(event) {
    const notification = document.getElementById('promoNotification');
    if (notification && !notification.contains(event.target)) {
        closePromoNotification();
    }
});
</script>
{% endblock %}