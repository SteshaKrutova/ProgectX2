{% extends "base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - ProjectX2{% endblock %}

{% block content %}
{% if current_user.is_authenticated %}
    {% if current_user.role == 'customer' %}
        <!-- –î–∞—à–±–æ—Ä–¥ –¥–ª—è –∑–∞–∫–∞–∑—á–∏–∫–∞ -->
        <div class="dashboard-header">
            <h2>üìä –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑—á–∏–∫–∞</h2>
        </div>

        <div class="dashboard-actions-horizontal">
            <div class="action-card-horizontal">
                <div class="action-icon">üìã</div>
                <div class="action-content">
                    <h3>–ú–æ–∏ —É—Å–ª—É–≥–∏</h3>
                    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–º–∏ —É—Å–ª—É–≥–∞–º–∏</p>
                    <a href="{{ url_for('customer_services') }}" class="btn btn-primary">–ü–µ—Ä–µ–π—Ç–∏ –∫ —É—Å–ª—É–≥–∞–º</a>
                </div>
            </div>
            
            <div class="action-card-horizontal">
                <div class="action-icon">üìà</div>
                <div class="action-content">
                    <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <p>–ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ —É—Å–ª—É–≥–∞–º</p>
                    <a href="{{ url_for('customer_stats') }}" class="btn btn-primary">–°–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</a>
                </div>
            </div>

            <div class="action-card-horizontal">
                <div class="action-icon">üí∞</div>
                <div class="action-content">
                    <h3>–ü—Ä–æ–º–æ–∫–æ–¥—ã</h3>
                    <p>–°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏</p>
                    <button class="btn btn-info" disabled>–°–∫–æ—Ä–æ –±—É–¥–µ—Ç</button>
                </div>
            </div>
        </div>

        <!-- –ë–ª–æ–∫ —Å –±—ã—Å—Ç—Ä–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
        <div class="quick-stats">
            <h3>üìä –ë—ã—Å—Ç—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-number">{{ active_services_count|default(0) }}</span>
                    <span class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —É—Å–ª—É–≥</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">{{ total_connections|default(0) }}</span>
                    <span class="stat-label">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–π</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">{{ total_revenue|default(0) }}‚ÇΩ</span>
                    <span class="stat-label">–û–±—â–∏–π –¥–æ—Ö–æ–¥</span>
                </div>
            </div>
        </div> -->

    <!-- –î–∞—à–±–æ—Ä–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
    {% elif current_user.role == 'admin' %}
        <div class="dashboard-header">
            <h2>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
        </div>

        <div class="dashboard-actions-horizontal">
            <div class="action-card-horizontal">
                <div class="action-icon">üë•</div>
                <div class="action-content">
                    <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å–∏—Å—Ç–µ–º—ã</p>
                    <a href="{{ url_for('admin_users') }}" class="btn btn-primary">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</a>
                </div>
            </div>

        {% elif current_user.role == 'client' %}
        <!-- –î–∞—à–±–æ—Ä–¥ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ -->
        <div class="dashboard-header">
            <h2>üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞</h2>
        </div>

        <div class="dashboard-actions-horizontal">
            <div class="action-card-horizontal">
                <div class="action-icon">üì¶</div>
                <div class="action-content">
                    <h3>–ú–æ–∏ —É—Å–ª—É–≥–∏</h3>
                    <p>–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ —É—Å–ª—É–≥–∞–º–∏</p>
                    <a href="{{ url_for('client_services') }}" class="btn btn-primary">–ü–µ—Ä–µ–π—Ç–∏ –∫ —É—Å–ª—É–≥–∞–º</a>
                </div>
            </div>

            <div class="action-card-horizontal">
                <div class="action-icon">üìä</div>
                <div class="action-content">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤</h3>
                    <p>–ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –æ–ø–µ—Ä–∞—Ü–∏–π</p>
                    <a href="{{ url_for('expense_history') }}" class="btn btn-primary">–°–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é</a>
                </div>
            </div>
        
    {% else %}
        <!-- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ä–æ–ª–µ–π -->
        <div class="welcome-section">
            <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ProjectX2!</h2>
            <p>–≠—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥–∞–º–∏ —Å —Ç—Ä–µ–º—è —Ä–æ–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:</p>
            
            <div class="roles-grid">
                <div class="role-card">
                    <div class="role-icon">üë§</div>
                    <h3>–ö–ª–∏–µ–Ω—Ç</h3>
                    <p>–û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∏ –æ—Ç–∫–ª—é—á–∞—Ç—å —É—Å–ª—É–≥–∏</p>
                </div>
                
                <div class="role-card">
                    <div class="role-icon">üëî</div>
                    <h3>–ó–∞–∫–∞–∑—á–∏–∫</h3>
                    <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏, —Å–æ–∑–¥–∞–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç —É—Å–ª—É–≥–∞–º–∏</p>
                </div>
                
                <div class="role-card">
                    <div class="role-icon">üëë</div>
                    <h3>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h3>
                    <p>–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</p>
                </div>
            </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ -->
        <div class="user-info-card">
            <h3>üë§ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—à–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ:</h3>
            <div class="user-info-grid">
                <div class="info-item">
                    <strong>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</strong>
                    <span>{{ current_user.username }}</span>
                </div>
                <div class="info-item">
                    <strong>Email:</strong>
                    <span>{{ current_user.email }}</span>
                </div>
                <div class="info-item">
                    <strong>–†–æ–ª—å:</strong>
                    <span class="role-badge role-{{ current_user.role }}">
                        {% if current_user.role == 'admin' %}
                            –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
                        {% elif current_user.role == 'customer' %}
                            –ó–∞–∫–∞–∑—á–∏–∫
                        {% else %}
                            –ö–ª–∏–µ–Ω—Ç
                        {% endif %}
                    </span>
                </div>
                <div class="info-item">
                    <strong>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong>
                    <span>{{ current_user.created_at.strftime('%d.%m.%Y %H:%M') }}</span>
                </div>
            </div>
        </div>
    {% endif %}

{% else %}
    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
    <div class="welcome-section">
        <h2>üöÄ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ProjectX2!</h2>
        <p class="welcome-description">–ú–æ–Ω–∏—Ç–æ—Ä–∏–º —á—Ç–æ-—Ç–æ. –ü–æ–∫–∞ –Ω–µ –æ—á–µ–Ω—å –ø–æ–Ω—è—Ç–Ω–æ —á—Ç–æ.</p>
        
        <div class="roles-grid">
            <div class="role-card">
                <div class="role-icon">üë§</div>
                <h3>–ö–ª–∏–µ–Ω—Ç</h3>
                <p>–ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ —É—Å–ª—É–≥–∞–º–∏, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</p>
            </div>
            
            <div class="role-card">
                <div class="role-icon">üëî</div>
                <h3>–ó–∞–∫–∞–∑—á–∏–∫</h3>
                <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ —É—Å–ª—É–≥–∏, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
            </div>
            
            <div class="role-card">
                <div class="role-icon">üëë</div>
                <h3>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h3>
                <p>–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–æ–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</p>
            </div>
        </div>

        <div class="auth-section">
            <div class="auth-content">
                <h4>üí´ –ù–∞—á–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç—É –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!</h4>
                <p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É ProjectX2 –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</p>
                
                <div class="auth-buttons">
                    <a href="/login" class="btn btn-primary btn-large">
                        üîê –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
                    </a>
                    <a href="/register" class="btn btn-secondary btn-large">
                        üìù –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                    </a>
                </div>
            </div>
        </div>
    </div>
{% endif %}

<style>
/* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
.dashboard-header {
    text-align: center;
    margin-bottom: 30px;
    padding: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 15px;
    color: white;
}

.dashboard-header h2 {
    margin: 0;
    font-size: 28px;
}

.dashboard-header p {
    margin: 10px 0 0 0;
    opacity: 0.9;
}

/* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
.dashboard-actions-horizontal {
    display: flex;
    gap: 20px;
    justify-content: center;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.action-card-horizontal {
    display: flex;
    align-items: center;
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
    min-width: 300px;
    max-width: 400px;
    flex: 1;
}

.action-card-horizontal:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.action-icon {
    font-size: 48px;
    margin-right: 20px;
    flex-shrink: 0;
}

.action-content {
    flex: 1;
}

.action-content h3 {
    color: #2c3e50;
    margin-bottom: 10px;
    font-size: 20px;
}

.action-content p {
    color: #6c757d;
    margin-bottom: 15px;
    line-height: 1.4;
}

.action-content .btn {
    width: 100%;
    margin-top: 10px;
}

/* –ë—ã—Å—Ç—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
.quick-stats {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    margin-bottom: 30px;
}

.quick-stats h3 {
    margin: 0 0 20px 0;
    color: #2c3e50;
    text-align: center;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
}

.stat-item {
    text-align: center;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
    transition: transform 0.3s ease;
}

.stat-item:hover {
    transform: translateY(-2px);
}

.stat-number {
    display: block;
    font-size: 24px;
    font-weight: bold;
    color: #667eea;
    margin-bottom: 5px;
}

.stat-label {
    font-size: 14px;
    color: #6c757d;
}

/* –°–µ—Ç–∫–∞ —Ä–æ–ª–µ–π */
.roles-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin: 30px 0;
}

.role-card {
    background: white;
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
}

.role-card:hover {
    transform: translateY(-3px);
}

.role-icon {
    font-size: 48px;
    margin-bottom: 15px;
}

.role-card h3 {
    color: #2c3e50;
    margin-bottom: 10px;
}

.role-card p {
    color: #6c757d;
    line-height: 1.5;
}

/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ */
.user-info-card {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    margin-top: 30px;
}

.user-info-card h3 {
    color: #2c3e50;
    margin-bottom: 20px;
    text-align: center;
}

.user-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
}

.info-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    background: #f8f9fa;
    border-radius: 6px;
}

.info-item strong {
    color: #495057;
}

.role-badge {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: bold;
    text-transform: uppercase;
}

.role-admin {
    background: #dc3545;
    color: white;
}

.role-customer {
    background: #fd7e14;
    color: white;
}

.role-client {
    background: #20c997;
    color: white;
}

/* –°–µ–∫—Ü–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ */
.auth-section {
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    margin-top: 30px;
    text-align: center;
}

.auth-content h4 {
    color: #2c3e50;
    margin-bottom: 10px;
}

.auth-content p {
    color: #6c757d;
    margin-bottom: 20px;
}

.auth-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
    flex-wrap: wrap;
}

.btn-large {
    padding: 12px 24px;
    font-size: 16px;
    min-width: 180px;
}

.welcome-description {
    text-align: center;
    font-size: 18px;
    color: #6c757d;
    margin-bottom: 30px;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
    .dashboard-actions-horizontal {
        flex-direction: column;
    }
    
    .action-card-horizontal {
        flex-direction: column;
        text-align: center;
        min-width: auto;
    }
    
    .action-icon {
        margin-right: 0;
        margin-bottom: 15px;
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .roles-grid {
        grid-template-columns: 1fr;
    }
    
    .user-info-grid {
        grid-template-columns: 1fr;
    }
    
    .auth-buttons {
        flex-direction: column;
    }
    
    .btn-large {
        width: 100%;
    }
    
    .dashboard-header h2 {
        font-size: 24px;
    }
}
</style>
{% endblock %}