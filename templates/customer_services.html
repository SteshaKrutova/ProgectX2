{% extends "base.html" %}

{% block title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏ - ProjectX2{% endblock %}

{% block content %}
<div class="admin-container">
    <div class="admin-header">
        <h2>üëî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏</h2>
        <p class="admin-subtitle">–°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª—É–≥ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤</p>
    </div>

    <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π —É—Å–ª—É–≥–∏ -->
    <div class="service-form-card">
        <h3>‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —É—Å–ª—É–≥—É</h3>
        <form method="POST" action="{{ url_for('create_service') }}" class="auth-form">
            <div class="form-group">
                <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏:</label>
                <input type="text" id="name" name="name" class="form-input" required 
                       placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–∞">
            </div>

            <div class="form-group">
                <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏:</label>
                <textarea id="description" name="description" class="form-input" required 
                          placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏" rows="3"></textarea>
            </div>

            <div class="form-group">
                <label for="price">–°—Ç–æ–∏–º–æ—Å—Ç—å (—Ä—É–±.):</label>
                <input type="number" id="price" name="price" class="form-input" required 
                       step="0.01" min="0" placeholder="0.00">
            </div>

            <button type="submit" class="btn btn-primary btn-full">–°–æ–∑–¥–∞—Ç—å —É—Å–ª—É–≥—É</button>
        </form>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É—Å–ª—É–≥ -->
    <div class="services-list">
        <h3>üìã –ú–æ–∏ —É—Å–ª—É–≥–∏</h3>
        
        {% if services %}
            <div class="services-grid">
                {% for service in services %}
                <div class="service-card">
                    <div class="service-header">
                        <h4>{{ service.name }}</h4>
                        <span class="service-status status-{{ 'active' if service.is_active else 'inactive' }}">
                            {{ '–ê–∫—Ç–∏–≤–Ω–∞' if service.is_active else '–ù–µ–∞–∫—Ç–∏–≤–Ω–∞' }}
                        </span>
                    </div>
                    
                    <p class="service-description">{{ service.description }}</p>
                    
                    <div class="service-price">
                        üí∞ {{ service.price }} —Ä—É–±.
                    </div>
                    
                    <div class="service-stats">
                        <span>–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {{ service.users|length }}</span>
                    </div>

                    <!-- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
                    <form method="POST" action="{{ url_for('update_service', service_id=service.id) }}" 
                          class="service-edit-form">
                        <div class="form-group">
                            <input type="text" name="name" value="{{ service.name }}" 
                                   class="form-input form-input-sm" required>
                        </div>
                        
                        <div class="form-group">
                            <textarea name="description" class="form-input form-input-sm" 
                                      rows="2" required>{{ service.description }}</textarea>
                        </div>
                        
                        <div class="form-group">
                            <input type="number" name="price" value="{{ service.price }}" 
                                   step="0.01" min="0" class="form-input form-input-sm" required>
                        </div>

                        <div class="service-actions">
                            <button type="submit" class="btn btn-sm btn-success">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                            <a href="{{ url_for('toggle_service', service_id=service.id) }}" 
                               class="btn btn-sm btn-{{ 'warning' if service.is_active else 'info' }}">
                                {{ 'üö´ –í—ã–∫–ª—é—á–∏—Ç—å' if service.is_active else '‚úÖ –í–∫–ª—é—á–∏—Ç—å' }}
                            </a>
                            <a href="{{ url_for('delete_service', service_id=service.id) }}" 
                               class="btn btn-sm btn-danger" 
                               onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —É—Å–ª—É–≥—É ¬´{{ service.name }}¬ª?')">
                                üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                            </a>
                        </div>
                    </form>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-state">
                <div class="empty-icon">üì≠</div>
                <h4>–£—Å–ª—É–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h4>
                <p>–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é —É—Å–ª—É–≥—É –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤.</p>
            </div>
        {% endif %}
    </div>

    <div class="admin-actions">
        <a href="{{ url_for('index') }}" class="btn btn-secondary">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        <a href="{{ url_for('profile') }}" class="btn btn-info">üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</a>
    </div>
</div>
{% endblock %}